version: "3.4"

services:
    mysql:
        image: mysql:5.7
        container_name: mysql
        environment:
            MYSQL_HOST: localhost
            MYSQL_ROOT_PASSWORD: root
        ports:
            - 3306:3306
        restart: unless-stopped
#        volumes:
#            - ./db/sample.sql:/docker-entrypoint-initdb.d/sample.sql
    server:
        build: ./backend
        container_name: server
        depends_on:
            - mysql
        environment:
            MYSQL_HOST_IP: mysql
        ports:
            - 8000:8000
        volumes:
            - ./server:/app
        links:
            - mysql
        command: npm start
    client:
        build: ./frontend
        container_name: client_container
        environment:
            NODE_PATH: src
        ports:
            - 3000:3000
        volumes:
            - ./client/src:/app/src
        links:
            - server
        command: npm start
